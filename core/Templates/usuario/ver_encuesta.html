{# core/templates/usuario/ver_encuesta.html #}
{% extends 'base.html' %}
{% load static %}

{% block title %}Encuesta{% endblock %}

{% block extra_css %}
  <link href="{% static 'css/funcionario.css' %}" rel="stylesheet">
  <style>
    .encuesta-container {
      max-width: 600px;
      margin: 40px auto;
      background: #ffffff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .encuesta-container h3 {
      color: #003366;
      margin-bottom: 15px;
    }
    .opcion-radio {
      margin-top: 10px;
      display: block;
    }
    .btn-votar {
      margin-top: 20px;
      padding: 10px 20px;
      background: #003366;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .btn-votar:hover {
      background: #002244;
    }
    #playerHTML5, #playerYT {
      width: 100%;
      max-width: 800px;
      height: 450px;
      background: #000;
      margin: 0 auto 20px auto;
    }
    #playerHTML5 { display: none; }
    #playerYT { display: none; }
  </style>
{% endblock %}

{% block content %}
  <div class="sidebar-toggle" onclick="toggleSidebar()">&#9776;</div>
  <div class="sidebar" id="sidebar">
    <a href="{% url 'vista_admin' %}">Menú Principal</a>
    <a href="{% url 'traductor' %}">Traducir a LSCH</a>
    <a href="{% url 'listar_videos' %}">Realizar encuesta</a>
    <a href="{% url 'logout' %}">Cerrar sesión</a>
  </div>

  <div class="encuesta-container">
    <h3>{{ encuesta.pregunta }}</h3>
    <form method="post" action="{% url 'responder_encuesta' encuesta.id %}">
      {% csrf_token %}
      {% for opcion in encuesta.opciones.all %}
        <label class="opcion-radio">
          <input type="radio" name="opcion_sel" value="{{ opcion.id }}"> {{ opcion.texto }}
        </label>
      {% endfor %}
      <button type="submit" class="btn-votar">Votar</button>
    </form>
  </div>

  {# Reproductor de Videos con JS (igual que en traductor) #}
  <video id="playerHTML5" controls></video>
  <div id="playerYT"></div>
{% endblock %}

{% block extra_js %}
  <script>
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
    }
    // Añade aquí la misma lógica de reproducción que usas en traductor.html
    // para consumir `playlist = {{ playlist|safe }}` y llamar a playNext()
  </script>
{% endblock %}
